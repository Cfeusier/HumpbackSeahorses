<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <link rel='stylesheet' src="/client/style.css">
  </head>
  
  <h1>Welcome to HumpbackSeahorses</h1>
<!--     <div class='chat-log'></div> -->
    <ul id="messages"></ul>
    <form action="">
      <input id="room" placeholder='room' autocomplete="off" />
      <input id="lang" placeholder='lang' autocomplete="off" />
      <input id="username" placeholder='username' autocomplete="off" />
      <input id="m" placeholder='message' autocomplete="off" /><button>Send</button>
    </form>
    <script src='/lib/jquery.min.js'></script>
    <script src='/lib/underscore.js'></script>
    <script src='/lib/backbone.js'></script>
    <script src="/lib/socket.io.js"></script>
    <script src="/client/app.js"></script>
    <script>
      var socket = io();
      $('form').submit(function(){
        var message = {
          text: $('#m').val(),
          lang: $('#lang').val(),
          username: $('#username').val(),
          room: $('#room').val()
        };
        console.log('message si ->', message);
        socket.emit('chat message', message);
        $('#m').val('');
        return false;
      });
      socket.on('chat message', function(msg){
        $('#messages').append($('<li>').text(msg.username + '@' + msg.room + ' - ' + msg.text));
      });
    </script>
  </body>
</html>

